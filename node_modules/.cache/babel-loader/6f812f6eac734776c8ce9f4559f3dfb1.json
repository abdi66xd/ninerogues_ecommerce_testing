{"ast":null,"code":"import axios from 'axios';\nimport { setAlert } from './alert';\nimport { GET_COUPON_SUCCESS, GET_COUPON_FAIL } from './types';\nexport const check_coupon = coupon_name => async dispatch => {\n  const config = {\n    headers: {\n      'Accept': 'application/json',\n      'Authorization': `JWT ${localStorage.getItem('access')}`\n    }\n  };\n\n  try {\n    const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/coupons/check-coupon?coupon_name=${coupon_name}`, config);\n\n    if (res.status === 200) {\n      dispatch({\n        type: GET_COUPON_SUCCESS,\n        payload: res.data\n      });\n      dispatch(setAlert('Coupon applied', 'green'));\n    } else {\n      dispatch({\n        type: GET_COUPON_FAIL\n      });\n\n      if (res.data.error) {\n        dispatch(setAlert(res.data.error, 'red'));\n      } else {\n        dispatch(setAlert('This coupon does not exist', 'red'));\n      }\n    }\n  } catch (err) {\n    dispatch({\n      type: GET_COUPON_FAIL\n    });\n    dispatch(setAlert('This coupon does not exist', 'red'));\n  }\n\n  window.scrollTo(0, 0);\n};","map":{"version":3,"sources":["D:/tutos/ninerogues_ecommerce/src/redux/actions/coupons.js"],"names":["axios","setAlert","GET_COUPON_SUCCESS","GET_COUPON_FAIL","check_coupon","coupon_name","dispatch","config","headers","localStorage","getItem","res","get","process","env","REACT_APP_API_URL","status","type","payload","data","error","err","window","scrollTo"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,SAAzB;AACA,SACIC,kBADJ,EAEIC,eAFJ,QAGO,SAHP;AAKA,OAAO,MAAMC,YAAY,GAAGC,WAAW,IAAI,MAAMC,QAAN,IAAkB;AACzD,QAAMC,MAAM,GAAG;AACXC,IAAAA,OAAO,EAAE;AACL,gBAAU,kBADL;AAEL,uBAAkB,OAAMC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAA+B;AAFlD;AADE,GAAf;;AAOA,MAAI;AACA,UAAMC,GAAG,GAAG,MAAMX,KAAK,CAACY,GAAN,CAAW,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,yCAAwCV,WAAY,EAA/F,EAAkGE,MAAlG,CAAlB;;AAEA,QAAII,GAAG,CAACK,MAAJ,KAAe,GAAnB,EAAwB;AACpBV,MAAAA,QAAQ,CAAC;AACLW,QAAAA,IAAI,EAAEf,kBADD;AAELgB,QAAAA,OAAO,EAAEP,GAAG,CAACQ;AAFR,OAAD,CAAR;AAIAb,MAAAA,QAAQ,CAACL,QAAQ,CAAC,gBAAD,EAAmB,OAAnB,CAAT,CAAR;AACH,KAND,MAMO;AACHK,MAAAA,QAAQ,CAAC;AACLW,QAAAA,IAAI,EAAEd;AADD,OAAD,CAAR;;AAGA,UAAIQ,GAAG,CAACQ,IAAJ,CAASC,KAAb,EAAoB;AAChBd,QAAAA,QAAQ,CAACL,QAAQ,CAACU,GAAG,CAACQ,IAAJ,CAASC,KAAV,EAAiB,KAAjB,CAAT,CAAR;AACH,OAFD,MAEO;AACHd,QAAAA,QAAQ,CAACL,QAAQ,CAAC,4BAAD,EAA+B,KAA/B,CAAT,CAAR;AACH;AACJ;AACJ,GAnBD,CAmBE,OAAMoB,GAAN,EAAW;AACTf,IAAAA,QAAQ,CAAC;AACLW,MAAAA,IAAI,EAAEd;AADD,KAAD,CAAR;AAGAG,IAAAA,QAAQ,CAACL,QAAQ,CAAC,4BAAD,EAA+B,KAA/B,CAAT,CAAR;AACH;;AAEDqB,EAAAA,MAAM,CAACC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AACH,CAnCM","sourcesContent":["import axios from 'axios';\r\nimport { setAlert } from './alert';\r\nimport {\r\n    GET_COUPON_SUCCESS,\r\n    GET_COUPON_FAIL,\r\n} from './types';\r\n\r\nexport const check_coupon = coupon_name => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Authorization': `JWT ${localStorage.getItem('access')}`\r\n        }\r\n    };\r\n\r\n    try {\r\n        const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/coupons/check-coupon?coupon_name=${coupon_name}`, config);\r\n\r\n        if (res.status === 200) {\r\n            dispatch({\r\n                type: GET_COUPON_SUCCESS,\r\n                payload: res.data\r\n            });\r\n            dispatch(setAlert('Coupon applied', 'green'));\r\n        } else {\r\n            dispatch({\r\n                type: GET_COUPON_FAIL\r\n            });\r\n            if (res.data.error) {\r\n                dispatch(setAlert(res.data.error, 'red'));\r\n            } else {\r\n                dispatch(setAlert('This coupon does not exist', 'red'));\r\n            }\r\n        }\r\n    } catch(err) {\r\n        dispatch({\r\n            type: GET_COUPON_FAIL\r\n        });\r\n        dispatch(setAlert('This coupon does not exist', 'red'));\r\n    }\r\n\r\n    window.scrollTo(0, 0);\r\n}"]},"metadata":{},"sourceType":"module"}